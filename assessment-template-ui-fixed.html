<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OTrack Assessment Platform</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #5c6bc0; /* Soft indigo */
      --primary-light: #8e99f3;
      --primary-dark: #26418f;
      --secondary: #78909c; /* Blue grey */
      --success: #66bb6a; /* Soft green */
      --info: #4fc3f7; /* Soft blue */
      --warning: #ffb74d; /* Soft orange */
      --danger: #e57373; /* Soft red */
      --light: #f5f7fa;
      --dark: #37474f;
      --white: #ffffff;
      --gray-50: #fafbfc;
      --gray-100: #f5f7fa;
      --gray-200: #e9ecef;
      --gray-300: #dee2e6;
      --gray-400: #ced4da;
      --gray-500: #adb5bd;
      --gray-600: #78909c;
      --gray-700: #495057;
      --gray-800: #37474f;
      --gray-900: #263238;
      --accent: #80deea; /* Soft cyan accent */
      
      /* Specific background colors for cards */
      --card-bg: #ffffff;
      --card-header-bg: #f8fafd;
      
      /* Status colors for assessment tools */
      --status-pending: #ede7f6; /* Very soft purple */
      --status-in-progress: #e3f2fd; /* Very soft blue */
      --status-completed: #e8f5e9; /* Very soft green */
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      line-height: 1.6;
      color: var(--gray-800);
      background-color: var(--gray-100);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
    }
    
    header {
      background-color: var(--white);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--primary);
      text-decoration: none;
      display: flex;
      align-items: center;
    }
    
    .logo i {
      margin-right: 0.5rem;
      font-size: 1.75rem;
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--primary-light);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 500;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    main {
      padding: 2rem 0;
    }
    
    .breadcrumbs {
      display: flex;
      list-style: none;
      margin-bottom: 1.5rem;
    }
    
    .breadcrumbs li {
      display: flex;
      align-items: center;
    }
    
    .breadcrumbs li:not(:last-child)::after {
      content: '/';
      margin: 0 0.5rem;
      color: var(--gray-500);
    }
    
    .breadcrumbs a {
      color: var(--primary);
      text-decoration: none;
    }
    
    .breadcrumbs a:hover {
      text-decoration: underline;
    }
    
    .card {
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.03), 0 1px 5px rgba(0,0,0,0.02);
      margin-bottom: 2rem;
      overflow: hidden;
      transition: box-shadow 0.2s ease;
    }
    
    .card:hover {
      box-shadow: 0 5px 15px rgba(0,0,0,0.05), 0 1px 8px rgba(0,0,0,0.03);
    }
    
    .card-header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: var(--card-header-bg);
    }
    
    .card-body {
      padding: 1.5rem;
    }
    
    .card-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--gray-200);
      background-color: var(--card-header-bg);
      display: flex;
      justify-content: space-between;
    }
    
    h1, h2, h3, h4, h5, h6 {
      margin-bottom: 1rem;
      font-weight: 600;
      line-height: 1.2;
      color: var(--gray-900);
    }
    
    .text-muted {
      color: var(--gray-600);
      font-size: 0.9rem;
    }
    
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 0.35rem 0.75rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.01em;
      gap: 4px;
    }
    
    .badge-primary {
      background-color: rgba(92, 107, 192, 0.15);
      color: var(--primary-dark);
    }
    
    .badge-warning {
      background-color: rgba(255, 183, 77, 0.15);
      color: #f57c00;
    }
    
    .badge i {
      font-size: 14px;
    }
    
    /* Input field styling enhancements */
    input[type="text"],
    input[type="email"],
    input[type="number"],
    input[type="date"],
    select,
    textarea {
      width: 100%;
      padding: 0.65rem 0.85rem;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.2s ease;
      background-color: var(--white);
      color: var(--gray-800);
    }
    
    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="number"]:focus,
    input[type="date"]:focus,
    select:focus,
    textarea:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(92, 107, 192, 0.15);
    }
    
    .form-group {
      margin-bottom: 1.75rem;
    }
    
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--gray-700);
    }
    
    .form-group .text-muted {
      font-size: 0.85rem;
      margin-top: 0.25rem;
      display: block;
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 500;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      gap: 0.5rem;
      letter-spacing: 0.01em;
    }
    
    .btn i {
      font-size: 1.1rem;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
      box-shadow: 0 2px 6px rgba(92, 107, 192, 0.2);
    }
    
    .btn-primary:hover {
      background-color: var(--primary-dark);
      box-shadow: 0 4px 8px rgba(92, 107, 192, 0.3);
      transform: translateY(-1px);
    }
    
    .btn-secondary {
      background-color: var(--secondary);
      color: white;
      box-shadow: 0 2px 6px rgba(120, 144, 156, 0.2);
    }
    
    .btn-secondary:hover {
      background-color: #637b88;
      box-shadow: 0 4px 8px rgba(120, 144, 156, 0.3);
      transform: translateY(-1px);
    }
    
    .btn-outline {
      background-color: transparent;
      border: 1px solid var(--gray-300);
      color: var(--gray-700);
    }
    
    .btn-outline:hover {
      background-color: var(--gray-100);
      border-color: var(--gray-400);
      transform: translateY(-1px);
    }

    .btn-success {
      background-color: var(--success);
      color: white;
      box-shadow: 0 2px 6px rgba(102, 187, 106, 0.2);
    }

    .btn-success:hover {
      background-color: #4caf50;
      box-shadow: 0 4px 8px rgba(102, 187, 106, 0.3);
      transform: translateY(-1px);
    }
    
    /* Assessment options */
    .assessment-options {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1.25rem;
      margin-bottom: 2rem;
    }
    
    .assessment-option {
      border: 1px solid var(--gray-200);
      border-radius: 12px;
      padding: 1.25rem;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: var(--white);
      display: flex;
      flex-direction: column;
    }
    
    .assessment-option:hover {
      border-color: var(--primary-light);
      box-shadow: 0 5px 15px rgba(92, 107, 192, 0.08);
      transform: translateY(-2px);
    }
    
    .assessment-option.selected {
      border-color: var(--primary);
      background-color: rgba(92, 107, 192, 0.04);
      box-shadow: 0 5px 15px rgba(92, 107, 192, 0.1);
    }
    
    .assessment-option-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      border-radius: 12px;
      background-color: var(--primary-light);
      color: white;
      margin-bottom: 1rem;
    }
    
    .assessment-option-icon i {
      font-size: 1.5rem;
    }
    
    /* Linear Progress Bar styling */
    .progress {
      height: 10px;
      background-color: var(--gray-200);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 2rem;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(to right, var(--primary-light), var(--primary));
      width: 30%;
      border-radius: 10px;
      transition: width 0.4s ease;
    }
    
    /* Tabs styling enhancement */
    .tabs {
      display: flex;
      list-style: none;
      border-bottom: 1px solid var(--gray-300);
      margin-bottom: 1.5rem;
      gap: 0.5rem;
    }
    
    .tab-item {
      padding: 0.75rem 1.25rem;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      font-weight: 500;
      color: var(--gray-600);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      border-radius: 8px 8px 0 0;
    }
    
    .tab-item:hover {
      color: var(--primary);
      background-color: rgba(92, 107, 192, 0.04);
    }
    
    .tab-item.active {
      border-bottom-color: var(--primary);
      color: var(--primary);
      background-color: rgba(92, 107, 192, 0.08);
    }
    
    .tab-item i {
      font-size: 1.1rem;
    }
    
    .observation-box {
      border: 1px solid var(--gray-200);
      border-radius: 12px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
      background-color: var(--white);
      box-shadow: 0 1px 3px rgba(0,0,0,0.02);
      transition: box-shadow 0.2s ease;
    }
    
    .observation-box:hover {
      box-shadow: 0 2px 6px rgba(0,0,0,0.04);
    }
    
    .observation-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--gray-100);
    }
    
    .rating-scale {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1.25rem;
      justify-content: space-between;
    }
    
    .rating-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    
    .rating-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--gray-300);
      background-color: white;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    
    .rating-btn:hover {
      background-color: var(--primary-light);
      color: white;
      border-color: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: 0 3px 6px rgba(92, 107, 192, 0.15);
    }
    
    .rating-btn.selected {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
      box-shadow: 0 3px 6px rgba(92, 107, 192, 0.2);
    }
    
    .rating-label {
      font-size: 0.75rem;
      margin-top: 0.25rem;
      color: var(--gray-600);
      max-width: 100px;
      text-align: center;
    }
    
    .form-check {
      display: flex;
      align-items: center;
      margin-bottom: 0.75rem;
      padding: 0.5rem;
      border-radius: 6px;
      transition: background-color 0.2s ease;
    }
    
    .form-check:hover {
      background-color: var(--gray-100);
    }
    
    .form-check input {
      margin-right: 0.5rem;
    }
    
    .checkbox-label {
      cursor: pointer;
      display: flex;
      align-items: center;
    }
    
    /* Alerts/Notifications */
    .alert {
      padding: 1.25rem;
      margin-bottom: 1.5rem;
      border-radius: 8px;
      border-left: 4px solid;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
    }
    
    .alert:before {
      font-family: 'Material Icons';
      font-size: 1.25rem;
    }
    
    .alert-info {
      background-color: rgba(79, 195, 247, 0.08);
      border-left-color: var(--info);
    }
    
    .alert-info:before {
      content: "info";
      color: var(--info);
    }
    
    .alert-warning {
      background-color: rgba(255, 183, 77, 0.08);
      border-left-color: var(--warning);
    }
    
    .alert-warning:before {
      content: "warning";
      color: var(--warning);
    }
    
    .alert-success {
      background-color: rgba(102, 187, 106, 0.08);
      border-left-color: var(--success);
    }
    
    .alert-success:before {
      content: "check_circle";
      color: var(--success);
    }
    
    /* Stepper styling update */
    .stepper {
      display: flex;
      justify-content: space-between;
      margin-bottom: 2.5rem;
      position: relative;
    }
    
    .stepper::before {
      content: '';
      position: absolute;
      top: 18px;
      left: 0;
      right: 0;
      height: 2px;
      background-color: var(--gray-300);
      z-index: 0;
    }
    
    .step {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
    }
    
    .step-number {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: white;
      border: 2px solid var(--gray-300);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-bottom: 0.75rem;
      transition: all 0.3s ease;
      color: var(--gray-600);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .step.active .step-number {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
      box-shadow: 0 3px 6px rgba(92, 107, 192, 0.2);
    }
    
    .step.completed .step-number {
      background-color: var(--success);
      color: white;
      border-color: var(--success);
      box-shadow: 0 3px 6px rgba(102, 187, 106, 0.2);
    }
    
    .step-label {
      font-size: 0.875rem;
      text-align: center;
      color: var(--gray-700);
    }
    
    .auto-save-indicator {
      display: flex;
      align-items: center;
      color: var(--gray-600);
      font-size: 0.875rem;
    }
    
    /* Spinner for autosaving */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .spinner {
      width: 12px;
      height: 12px;
      border: 2px solid var(--gray-300);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 0.5rem;
      display: inline-block;
    }
    
    .tooltip {
      position: relative;
      cursor: help;
    }
    
    .tooltip:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      background-color: var(--gray-800);
      color: white;
      padding: 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
      white-space: nowrap;
      z-index: 10;
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    }
    
    /* Modal styling */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .modal {
      background-color: white;
      border-radius: 12px;
      width: 500px;
      max-width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }
    
    .modal-header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: var(--card-header-bg);
    }
    
    .modal-body {
      padding: 1.5rem;
    }
    
    .modal-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--gray-200);
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
      background-color: var(--card-header-bg);
    }
    
    .close-btn {
      background: none;
      border: none;
      font-size: 1.25rem;
      cursor: pointer;
      color: var(--gray-500);
      display: flex;
      align-items: center;
    }
    
    .actions {
      display: flex;
      justify-content: space-between;
      width: 100%;
    }
    
    .actions-left, .actions-right {
      display: flex;
      gap: 0.75rem;
    }
    
    /* Template-specific fields */
    .template-fields {
      display: none;
    }
    
    .template-fields.active {
      display: block;
    }
    
    /* Multiple column layout */
    .row {
      display: flex;
      flex-wrap: wrap;
      margin-right: -15px;
      margin-left: -15px;
    }
    
    .col {
      flex: 1 0 0%;
      padding-right: 15px;
      padding-left: 15px;
    }
    
    .col-6 {
      flex: 0 0 50%;
      max-width: 50%;
      padding-right: 15px;
      padding-left: 15px;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .assessment-options {
        grid-template-columns: 1fr;
      }
      
      .col-6 {
        flex: 0 0 100%;
        max-width: 100%;
      }
      
      .stepper {
        flex-direction: column;
        gap: 1rem;
      }
      
      .stepper::before {
        display: none;
      }
      
      .step {
        flex-direction: row;
        gap: 1rem;
      }
      
      .rating-scale {
        flex-wrap: wrap;
        justify-content: flex-start;
      }
      
      .rating-item {
        margin-bottom: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Header Navigation -->
  <header>
    <div class="container">
      <nav class="navbar">
        <a href="#" class="logo"><i class="material-icons">medical_services</i> OT Assessment Platform</a>
        <div class="user-info">
          <span class="text-muted">Dr. Sarah Johnson</span>
          <div class="user-avatar">SJ</div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container">
    <!-- Breadcrumbs -->
    <ul class="breadcrumbs">
      <li><a href="#">Home</a></li>
      <li><a href="#">Patients</a></li>
      <li><a href="#">John Smith</a></li>
      <li>New Assessment</li>
    </ul>

    <!-- Patient Info Card -->
    <div class="card">
      <div class="card-header">
        <div>
          <h2>John Smith</h2>
          <span class="text-muted">DOB: 05/12/1985 (39y) • MRN: 234567 • Insurance: BlueCross</span>
        </div>
        <div>
          <span class="badge badge-primary"><i class="material-icons">person</i> Active Patient</span>
        </div>
      </div>
    </div>

    <!-- Stepper for workflow progression -->
    <div class="stepper">
      <div class="step active">
        <div class="step-number">1</div>
        <div class="step-label">Select Template</div>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-label">Complete Assessment</div>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <div class="step-label">Summary & Recommendations</div>
      </div>
      <div class="step">
        <div class="step-number">4</div>
        <div class="step-label">Save & Export</div>
      </div>
    </div>

    <!-- Step 1: Select Assessment Template Screen -->
    <div id="step1" class="card">
      <div class="card-header">
        <h3>Step 1: Select Assessment Template</h3>
      </div>
      <div class="card-body">
        <div class="alert alert-info">
          <div>
            <p>Choose an assessment template to begin. The selected template will determine the workflow, forms, and fields for this assessment.</p>
          </div>
        </div>
        
        <div class="assessment-options">
          <div class="assessment-option" onclick="selectTemplate('sp2')">
            <div class="assessment-option-icon"><i class="material-icons">assignment</i></div>
            <h4>Sensory Profile-2</h4>
            <p class="text-muted">Caregiver questionnaire for sensory processing evaluation</p>
          </div>
          
          <div class="assessment-option" onclick="selectTemplate('spm2')">
            <div class="assessment-option-icon"><i class="material-icons">search</i></div>
            <h4>Sensory Processing Measure-2</h4>
            <p class="text-muted">Multi-environment assessment of sensory processing</p>
          </div>
          
          <div class="assessment-option" onclick="selectTemplate('sperc')">
            <div class="assessment-option-icon"><i class="material-icons">edit_note</i></div>
            <h4>SPERC Questionnaire</h4>
            <p class="text-muted">Sensory, processing, emotional regulation, and cognition</p>
          </div>
          
          <div class="assessment-option" onclick="selectTemplate('amps')">
            <div class="assessment-option-icon"><i class="material-icons">handyman</i></div>
            <h4>AMPS</h4>
            <p class="text-muted">Assessment of Motor and Process Skills</p>
          </div>
          
          <div class="assessment-option" onclick="selectTemplate('clinical')">
            <div class="assessment-option-icon"><i class="material-icons">visibility</i></div>
            <h4>Clinical Observations</h4>
            <p class="text-muted">Structured observational assessment framework</p>
          </div>
          
          <div class="assessment-option" onclick="selectTemplate('moho')">
            <div class="assessment-option-icon"><i class="material-icons">settings</i></div>
            <h4>MOHO Tools</h4>
            <p class="text-muted">Model of Human Occupation assessments (OSA, WRI, OCAIRS)</p>
          </div>
          
          <div class="assessment-option" onclick="selectTemplate('beery')">
            <div class="assessment-option-icon"><i class="material-icons">draw</i></div>
            <h4>Beery VMI</h4>
            <p class="text-muted">Visual-Motor Integration assessment</p>
          </div>
          
          <div class="assessment-option" onclick="selectTemplate('trauma')">
            <div class="assessment-option-icon"><i class="material-icons">psychology</i></div>
            <h4>Trauma-informed Tools</h4>
            <p class="text-muted">SAI, PLAY, Circle of Security assessments</p>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <div class="actions">
          <div class="actions-left">
            <button class="btn btn-outline"><i class="material-icons">close</i> Cancel</button>
          </div>
          <div class="actions-right">
            <button class="btn btn-primary" onclick="showStep('step2')">Continue <i class="material-icons">arrow_forward</i></button>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 2: Template-Specific Assessment Form Screen -->
    <div id="step2" class="card" style="display: none;">
      <div class="card-header">
        <h3>Step 2: Complete Assessment - <span id="selected-template-title">Sensory Profile-2</span></h3>
        <div class="auto-save-indicator">
          <i class="material-icons" style="font-size: 16px; margin-right: 4px; color: var(--success);">cloud_done</i>
          Auto-saving...
        </div>
      </div>
      <div class="card-body">
        <!-- Progress tracking -->
        <div class="progress">
          <div class="progress-bar"></div>
        </div>
        
        <!-- Template-specific tabs -->
        <ul class="tabs">
          <li class="tab-item active"><i class="material-icons">person</i> Client Information</li>
          <li class="tab-item"><i class="material-icons">checklist</i> Assessment Items</li>
          <li class="tab-item"><i class="material-icons">calculate</i> Scoring</li>
          <li class="tab-item"><i class="material-icons">summarize</i> Summary</li>
        </ul>
        
        <!-- Template-specific fields -->
        <div id="sp2-fields" class="template-fields active">
          <h4>Sensory Profile-2 Assessment</h4>
          
          <div class="form-group">
            <label>Age Range</label>
            <select class="form-control">
              <option>Birth - 6 months</option>
              <option>7-14 months</option>
              <option>15-35 months</option>
              <option>3-4 years</option>
              <option>5-12 years</option>
              <option>13+ years</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Caregiver Completing Form</label>
            <input type="text" class="form-control">
          </div>
          
          <div class="form-group">
            <label>Relationship to Child</label>
            <select class="form-control">
              <option>Parent</option>
              <option>Guardian</option>
              <option>Grandparent</option>
              <option>Other Family Member</option>
              <option>Teacher</option>
              <option>Other Professional</option>
            </select>
          </div>
          
          <h4>Sensory Systems Evaluation</h4>
          
          <div class="observation-box">
            <div class="observation-header">
              <h5>Auditory Processing <i class="material-icons tooltip" data-tooltip="How the child processes and responds to sounds" style="font-size: 16px; vertical-align: middle; color: var(--gray-600);">help_outline</i></h5>
            </div>
            
            <div class="form-group">
              <label>1. Child is distracted or has trouble functioning if there is a lot of noise around</label>
              <div class="rating-scale">
                <div class="rating-item">
                  <button class="rating-btn">1</button>
                  <span class="rating-label">Almost Never</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">2</button>
                  <span class="rating-label">Seldom</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">3</button>
                  <span class="rating-label">Occasionally</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">4</button>
                  <span class="rating-label">Frequently</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">5</button>
                  <span class="rating-label">Almost Always</span>
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <label>2. Appears to not hear what you say (for example, does not "tune-in" to what you say, appears to ignore you)</label>
              <div class="rating-scale">
                <div class="rating-item">
                  <button class="rating-btn">1</button>
                  <span class="rating-label">Almost Never</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">2</button>
                  <span class="rating-label">Seldom</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">3</button>
                  <span class="rating-label">Occasionally</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">4</button>
                  <span class="rating-label">Frequently</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">5</button>
                  <span class="rating-label">Almost Always</span>
                </div>
              </div>
            </div>
            
            <!-- Additional items would continue here -->
          </div>
          
          <div class="observation-box">
            <div class="observation-header">
              <h5>Visual Processing <i class="material-icons tooltip" data-tooltip="How the child processes and responds to visual stimuli" style="font-size: 16px; vertical-align: middle; color: var(--gray-600);">help_outline</i></h5>
            </div>
            
            <!-- Visual processing items would go here -->
            <div class="form-group">
              <label>10. Prefers to be in the dark</label>
              <div class="rating-scale">
                <div class="rating-item">
                  <button class="rating-btn">1</button>
                  <span class="rating-label">Almost Never</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">2</button>
                  <span class="rating-label">Seldom</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">3</button>
                  <span class="rating-label">Occasionally</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">4</button>
                  <span class="rating-label">Frequently</span>
                </div>
                <div class="rating-item">
                  <button class="rating-btn">5</button>
                  <span class="rating-label">Almost Always</span>
                </div>
              </div>
            </div>
            
            <!-- Additional visual items would continue -->
          </div>
          
          <!-- Smart prompts for missing information -->
          <div class="alert alert-warning">
            <div>
              <strong>Missing Information:</strong> Please complete all items in the Auditory Processing section before proceeding.
            </div>
          </div>
        </div>
        
        <!-- AMPS Assessment Fields (initially hidden) -->
        <div id="amps-fields" class="template-fields">
          <h4>Assessment of Motor and Process Skills (AMPS)</h4>
          
          <div class="form-group">
            <label>Task Selection</label>
            <select class="form-control">
              <option>Prepare a simple sandwich</option>
              <option>Making a bed</option>
              <option>Sweeping the floor</option>
              <option>Setting a table</option>
              <option>Folding laundry</option>
              <option>Other (specify below)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Custom Task (if applicable)</label>
            <input type="text" class="form-control">
          </div>
          
          <h4>Motor Skills</h4>
          
          <div class="observation-box">
            <div class="observation-header">
              <h5>Posture <i class="material-icons tooltip" data-tooltip="Stabilizes trunk and maintains balance while standing or sitting" style="font-size: 16px; vertical-align: middle; color: var(--gray-600);">help_outline</i></h5>
            </div>
            
            <div class="rating-scale">
              <div class="rating-item">
                <button class="rating-btn">1</button>
                <span class="rating-label">Deficit</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">2</button>
                <span class="rating-label">Ineffective</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">3</button>
                <span class="rating-label">Questionable</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">4</button>
                <span class="rating-label">Competent</span>
              </div>
            </div>
            
            <div class="form-group">
              <label>Notes</label>
              <textarea class="form-control" rows="3"></textarea>
            </div>
          </div>
          
          <div class="observation-box">
            <div class="observation-header">
              <h5>Mobility <i class="material-icons tooltip" data-tooltip="Moves body and objects through space" style="font-size: 16px; vertical-align: middle; color: var(--gray-600);">help_outline</i></h5>
            </div>
            
            <div class="rating-scale">
              <div class="rating-item">
                <button class="rating-btn">1</button>
                <span class="rating-label">Deficit</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">2</button>
                <span class="rating-label">Ineffective</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">3</button>
                <span class="rating-label">Questionable</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">4</button>
                <span class="rating-label">Competent</span>
              </div>
            </div>
            
            <div class="form-group">
              <label>Notes</label>
              <textarea class="form-control" rows="3"></textarea>
            </div>
          </div>
          
          <h4>Process Skills</h4>
          
          <div class="observation-box">
            <div class="observation-header">
              <h5>Attention <i class="material-icons tooltip" data-tooltip="Focuses and maintains attention throughout task" style="font-size: 16px; vertical-align: middle; color: var(--gray-600);">help_outline</i></h5>
            </div>
            
            <div class="rating-scale">
              <div class="rating-item">
                <button class="rating-btn">1</button>
                <span class="rating-label">Deficit</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">2</button>
                <span class="rating-label">Ineffective</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">3</button>
                <span class="rating-label">Questionable</span>
              </div>
              <div class="rating-item">
                <button class="rating-btn">4</button>
                <span class="rating-label">Competent</span>
              </div>
            </div>
            
            <div class="form-group">
              <label>Notes</label>
              <textarea class="form-control" rows="3"></textarea>
            </div>
          </div>
        </div>
        
        <!-- Beery VMI Fields (initially hidden) -->
        <div id="beery-fields" class="template-fields">
          <h4>Beery VMI (Visual-Motor Integration) Assessment</h4>
          
          <div class="form-group">
            <label>Test Date</label>
            <input type="date" class="form-control">
          </div>
          
          <div class="form-group">
            <label>Testing Environment</label>
            <select class="form-control">
              <option>Quiet, individual setting</option>
              <option>Classroom</option>
              <option>Therapy room</option>
              <option>Home</option>
              <option>Other</option>
            </select>
          </div>
          
          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <label>VMI Raw Score</label>
                <input type="number" class="form-control">
              </div>
            </div>
            <div class="col-6">
              <div class="form-group">
                <label>VMI Standard Score</label>
                <input type="number" class="form-control">
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <label>Visual Perception Raw Score</label>
                <input type="number" class="form-control">
              </div>
            </div>
            <div class="col-6">
              <div class="form-group">
                <label>Visual Perception Standard Score</label>
                <input type="number" class="form-control">
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <label>Motor Coordination Raw Score</label>
                <input type="number" class="form-control">
              </div>
            </div>
            <div class="col-6">
              <div class="form-group">
                <label>Motor Coordination Standard Score</label>
                <input type="number" class="form-control">
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label>Observations</label>
            <textarea class="form-control" rows="5"></textarea>
          </div>
          
          <div class="form-group">
            <label>Percentile Rank</label>
            <select class="form-control">
              <option>Below 1st percentile</option>
              <option>1st-5th percentile</option>
              <option>6th-10th percentile</option>
              <option>11th-25th percentile</option>
              <option>26th-50th percentile</option>
              <option>51st-75th percentile</option>
              <option>76th-90th percentile</option>
              <option>91st-95th percentile</option>
              <option>Above 95th percentile</option>
            </select>
          </div>
        </div>
        
        <!-- MOHO Fields (initially hidden) -->
        <div id="moho-fields" class="template-fields">
          <div class="form-group">
            <label>Select MOHO Assessment</label>
            <select class="form-control" onchange="selectMohoTool()">
              <option>Occupational Self Assessment (OSA)</option>
              <option>Worker Role Interview (WRI)</option>
              <option>Occupational Circumstances Assessment - Interview and Rating Scale (OCAIRS)</option>
            </select>
          </div>
          
          <!-- OSA Specific -->
          <div id="osa-fields">
            <h4>Occupational Self Assessment (OSA)</h4>
            
            <div class="observation-box">
              <h5>Competence</h5>
              
              <div class="form-group">
                <label>1. Concentrating on my tasks</label>
                <div class="rating-scale">
                  <div class="rating-item">
                    <button class="rating-btn">1</button>
                    <span class="rating-label">I have a lot of problems doing this</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">2</button>
                    <span class="rating-label">I have some difficulty doing this</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">3</button>
                    <span class="rating-label">I do this well</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">4</button>
                    <span class="rating-label">I do this extremely well</span>
                  </div>
                </div>
              </div>
              
              <div class="form-group">
                <label>2. Taking care of the place where I live</label>
                <div class="rating-scale">
                  <div class="rating-item">
                    <button class="rating-btn">1</button>
                    <span class="rating-label">I have a lot of problems doing this</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">2</button>
                    <span class="rating-label">I have some difficulty doing this</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">3</button>
                    <span class="rating-label">I do this well</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">4</button>
                    <span class="rating-label">I do this extremely well</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="observation-box">
              <h5>Values</h5>
              
              <div class="form-group">
                <label>1. Concentrating on my tasks</label>
                <div class="rating-scale">
                  <div class="rating-item">
                    <button class="rating-btn">1</button>
                    <span class="rating-label">Not important to me</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">2</button>
                    <span class="rating-label">Important to me</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">3</button>
                    <span class="rating-label">More important to me</span>
                  </div>
                  <div class="rating-item">
                    <button class="rating-btn">4</button>
                    <span class="rating-label">Most important to me</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Clinical Observations (initially hidden) -->
        <div id="clinical-fields" class="template-fields">
          <h4>Clinical Observations</h4>
          
          <div class="form-group">
            <label>Setting</label>
            <select class="form-control">
              <option>Clinic</option>
              <option>Classroom</option>
              <option>Home</option>
              <option>Community</option>
              <option>Other</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Duration of Observation</label>
            <input type="text" class="form-control" placeholder="e.g., 45 minutes">
          </div>
          
          <div class="observation-box">
            <h5>Postural Control and Movement</h5>
            
            <div class="form-group">
              <label>Observations</label>
              <textarea class="form-control" rows="4"></textarea>
            </div>
            
            <div class="form-check">
              <input type="checkbox" id="postural1">
              <label for="postural1" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--gray-400);">check_box_outline_blank</i> Difficulty maintaining seated posture</label>
            </div>
            
            <div class="form-check">
              <input type="checkbox" id="postural2">
              <label for="postural2" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--gray-400);">check_box_outline_blank</i> Poor balance reactions</label>
            </div>
            
            <div class="form-check">
              <input type="checkbox" id="postural3">
              <label for="postural3" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--gray-400);">check_box_outline_blank</i> Seeks movement frequently</label>
            </div>
            
            <div class="form-check">
              <input type="checkbox" id="postural4">
              <label for="postural4" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--gray-400);">check_box_outline_blank</i> Avoids movement activities</label>
            </div>
          </div>
          
          <div class="observation-box">
            <h5>Fine Motor Skills</h5>
            
            <div class="form-group">
              <label>Observations</label>
              <textarea class="form-control" rows="4"></textarea>
            </div>
            
            <div class="form-check">
              <input type="checkbox" id="fine1">
              <label for="fine1" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--gray-400);">check_box_outline_blank</i> Immature grasp pattern</label>
            </div>
            
            <div class="form-check">
              <input type="checkbox" id="fine2">
              <label for="fine2" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--gray-400);">check_box_outline_blank</i> Poor bilateral coordination</label>
            </div>
            
            <div class="form-check">
              <input type="checkbox" id="fine3">
              <label for="fine3" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--gray-400);">check_box_outline_blank</i> Poor in-hand manipulation</label>
            </div>
          </div>
          
          <div class="observation-box">
            <h5>Visual-Perceptual Skills</h5>
            
            <div class="form-group">
              <label>Observations</label>
              <textarea class="form-control" rows="4"></textarea>
            </div>
          </div>
          
          <div class="form-group">
            <label>Additional Comments</label>
            <textarea class="form-control" rows="5"></textarea>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <div class="actions">
          <div class="actions-left">
            <button class="btn btn-outline" onclick="showStep('step1')"><i class="material-icons">arrow_back</i> Back</button>
          </div>
          <div class="actions-right">
            <button class="btn btn-outline">Save as Draft <i class="material-icons">save</i></button>
            <button class="btn btn-primary" onclick="showStep('step3')">Continue <i class="material-icons">arrow_forward</i></button>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 3: Summary & Recommendations Screen -->
    <div id="step3" class="card" style="display: none;">
      <div class="card-header">
        <h3>Step 3: Summary & Recommendations</h3>
      </div>
      <div class="card-body">
        <div class="alert alert-info">
          <div>
            <p>Review the auto-generated summary below and add your professional insights and recommendations.</p>
          </div>
        </div>
        
        <div class="form-group">
          <label>Assessment Summary</label>
          <textarea class="form-control" rows="6" readonly>John Smith was assessed using the Sensory Profile-2 on 04/20/2025. Results indicate challenges in auditory processing with scores falling in the "definite difference" range. Visual and tactile processing appear to be within typical ranges. The client demonstrates a sensory seeking pattern in vestibular processing with increased activity level and difficulty with attention.

Based on caregiver report, these sensory processing difficulties impact the client's participation in classroom activities and social interactions with peers.</textarea>
        </div>
        
        <div class="form-group">
          <label>Clinical Insights <span class="text-muted">(auto-populated from assessment data, modify as needed)</span></label>
          <textarea class="form-control" rows="6">Client demonstrates a sensory processing pattern consistent with sensory modulation difficulties, particularly in the areas of auditory filtering and sensory seeking. These difficulties appear to impact attention, emotional regulation, and participation in structured activities.

The assessment results suggest that John would benefit from sensory-based interventions targeting modulation of auditory input and providing appropriate opportunities for vestibular and proprioceptive input within a structured environment.</textarea>
        </div>
        
        <div class="form-group">
          <label>Recommendations</label>
          <textarea class="form-control" rows="6">Based on assessment results, the following recommendations are proposed:

1. Implement a sensory diet providing regular proprioceptive and vestibular input throughout the day
2. Establish environmental modifications in classroom setting (e.g., noise-cancelling headphones, preferential seating away from environmental noise)
3. Begin weekly OT intervention (8-10 sessions) focusing on sensory integration techniques and self-regulation strategies
4. Parent/teacher education on sensory processing patterns and supportive strategies
5. Reassessment in 6 months to evaluate progress</textarea>
        </div>
        
        <div class="form-group">
          <label>Goals</label>
          <textarea class="form-control" rows="4">1. Client will demonstrate improved self-regulation using sensory strategies when faced with challenging auditory input, as measured by reduced behavioral outbursts (from 5-6/day to 1-2/day) within 3 months.

2. Client will independently identify and utilize appropriate sensory tools when feeling dysregulated in the classroom setting, with 80% success rate within 6 months.

3. Client will participate in structured classroom activities for 20-minute periods with appropriate attention to task, 4/5 opportunities within 3 months.</textarea>
        </div>
        
        <div class="form-group">
          <label>Follow-up Schedule</label>
          <select class="form-control">
            <option>Weekly sessions</option>
            <option>Bi-weekly sessions</option>
            <option>Monthly check-ins</option>
            <option>Quarterly reassessment</option>
            <option>Custom schedule (specify in notes)</option>
          </select>
        </div>
      </div>
      <div class="card-footer">
        <div class="actions">
          <div class="actions-left">
            <button class="btn btn-outline" onclick="showStep('step2')"><i class="material-icons">arrow_back</i> Back</button>
          </div>
          <div class="actions-right">
            <button class="btn btn-outline">Save as Draft <i class="material-icons">save</i></button>
            <button class="btn btn-primary" onclick="showStep('step4')">Generate Report <i class="material-icons">article</i></button>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 4: Save & Export Screen -->
    <div id="step4" class="card" style="display: none;">
      <div class="card-header">
        <h3>Step 4: Save & Export Assessment</h3>
      </div>
      <div class="card-body">
        <div class="alert alert-success">
          <div>
            <p><strong>Assessment Complete!</strong> The assessment has been saved to John Smith's profile. You can now export or share the report.</p>
          </div>
        </div>
        
        <h4>Export Options</h4>
        
        <div class="form-group">
          <div class="form-check">
            <input type="checkbox" id="export1" checked>
            <label for="export1" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--primary);">check_circle</i> Include raw assessment data</label>
          </div>
          
          <div class="form-check">
            <input type="checkbox" id="export2" checked>
            <label for="export2" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--primary);">check_circle</i> Include summary and recommendations</label>
          </div>
          
          <div class="form-check">
            <input type="checkbox" id="export3" checked>
            <label for="export3" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--primary);">check_circle</i> Include visualizations and scoring charts</label>
          </div>
          
          <div class="form-check">
            <input type="checkbox" id="export4">
            <label for="export4" class="checkbox-label"><i class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px; color: var(--gray-400);">radio_button_unchecked</i> Include educational handouts for parents/caregivers</label>
          </div>
        </div>
        
        <h4>Share Report</h4>
        
        <div class="form-group">
          <label>Email Report To</label>
          <input type="text" class="form-control" placeholder="Enter email addresses (comma separated)">
        </div>
        
        <div class="form-group">
          <label>Message (Optional)</label>
          <textarea class="form-control" rows="3" placeholder="Add a message to accompany the report"></textarea>
        </div>
        
        <div class="form-group">
          <label>Add to Patient's Medical Record</label>
          <select class="form-control">
            <option>Yes, add to EHR</option>
            <option>No, save to OT records only</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Schedule Follow-up</label>
          <input type="date" class="form-control">
        </div>
      </div>
      <div class="card-footer">
        <div class="actions">
          <div class="actions-left">
            <button class="btn btn-outline" onclick="showStep('step3')"><i class="material-icons">arrow_back</i> Back</button>
          </div>
          <div class="actions-right">
            <button class="btn btn-outline">
              <i class="material-icons">picture_as_pdf</i> PDF
            </button>
            <button class="btn btn-outline">
              <i class="material-icons">description</i> Word
            </button>
            <button class="btn btn-primary">
              <i class="material-icons">send</i> Send & Save
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal for template description (shown when info icon is clicked) -->
  <div class="modal-overlay" id="template-info-modal">
    <div class="modal">
      <div class="modal-header">
        <h3>About Sensory Profile-2</h3>
        <button class="close-btn" onclick="closeModal()"><i class="material-icons">close</i></button>
      </div>
      <div class="modal-body">
        <p>The Sensory Profile-2 is a standardized assessment that measures a child's sensory processing patterns. It consists of caregiver questionnaires specific to different age groups:</p>
        
        <ul>
          <li><strong>Infant (0-6 months)</strong>: 25 items</li>
          <li><strong>Toddler (7-35 months)</strong>: 54 items</li>
          <li><strong>Child (3-14 years)</strong>: 86 items</li>
          <li><strong>Adolescent/Adult (15+ years)</strong>: 60 items</li>
        </ul>
        
        <p>The assessment evaluates processing across sensory systems (auditory, visual, vestibular, etc.) and provides scores in four quadrants:</p>
        
        <ul>
          <li>Seeking/Seeker</li>
          <li>Avoiding/Avoider</li>
          <li>Sensitivity/Sensor</li>
          <li>Registration/Bystander</li>
        </ul>
        
        <p>Results are reported as "Typical Performance," "Probable Difference," or "Definite Difference" when compared to normative data.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" onclick="closeModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- JavaScript functionality -->
  <script>
    // Show/hide steps
    function showStep(stepId) {
      // Hide all steps
      document.getElementById('step1').style.display = 'none';
      document.getElementById('step2').style.display = 'none';
      document.getElementById('step3').style.display = 'none';
      document.getElementById('step4').style.display = 'none';
      
      // Show the requested step
      document.getElementById(stepId).style.display = 'block';
      
      // Update stepper
      const steps = document.querySelectorAll('.step');
      steps.forEach((step, index) => {
        step.classList.remove('active', 'completed');
      });
      
      // Set active and completed steps based on current step
      if (stepId === 'step1') {
        steps[0].classList.add('active');
      } else if (stepId === 'step2') {
        steps[0].classList.add('completed');
        steps[1].classList.add('active');
      } else if (stepId === 'step3') {
        steps[0].classList.add('completed');
        steps[1].classList.add('completed');
        steps[2].classList.add('active');
      } else if (stepId === 'step4') {
        steps[0].classList.add('completed');
        steps[1].classList.add('completed');
        steps[2].classList.add('completed');
        steps[3].classList.add('active');
      }
      
      // Scroll to top
      window.scrollTo(0, 0);
    }
    
    // Select assessment template
    function selectTemplate(templateId) {
      // Remove selection from all options
      const options = document.querySelectorAll('.assessment-option');
      options.forEach(option => {
        option.classList.remove('selected');
      });
      
      // Add selection to clicked option
      event.currentTarget.classList.add('selected');
      
      // Update template title
      let templateTitle = '';
      switch(templateId) {
        case 'sp2':
          templateTitle = 'Sensory Profile-2';
          break;
        case 'spm2':
          templateTitle = 'Sensory Processing Measure-2';
          break;
        case 'sperc':
          templateTitle = 'SPERC Questionnaire';
          break;
        case 'amps':
          templateTitle = 'Assessment of Motor and Process Skills';
          break;
        case 'clinical':
          templateTitle = 'Clinical Observations';
          break;
        case 'moho':
          templateTitle = 'MOHO Tools';
          break;
        case 'beery':
          templateTitle = 'Beery VMI';
          break;
        case 'trauma':
          templateTitle = 'Trauma-informed Tools';
          break;
      }
      
      document.getElementById('selected-template-title').textContent = templateTitle;
      
      // Hide all template-specific fields
      const templateFields = document.querySelectorAll('.template-fields');
      templateFields.forEach(field => {
        field.classList.remove('active');
      });
      
      // Show fields for selected template
      const selectedFields = document.getElementById(templateId + '-fields');
      if (selectedFields) {
        selectedFields.classList.add('active');
      }
    }
    
    // Select MOHO tool
    function selectMohoTool() {
      // Implementation would show/hide specific MOHO tool fields
      console.log('MOHO tool selected');
    }
    
    // Modal controls
    function openModal() {
      document.getElementById('template-info-modal').style.display = 'flex';
    }
    
    function closeModal() {
      document.getElementById('template-info-modal').style.display = 'none';
    }
    
    // Add event listeners to rating buttons
    document.addEventListener('DOMContentLoaded', function() {
      // Rating button selection
      const ratingButtons = document.querySelectorAll('.rating-btn');
      ratingButtons.forEach(button => {
        button.addEventListener('click', function() {
          // Remove selection from siblings
          const parent = this.closest('.rating-scale');
          const siblings = parent.querySelectorAll('.rating-btn');
          siblings.forEach(sibling => {
            sibling.classList.remove('selected');
          });
          
          // Add selection to clicked button
          this.classList.add('selected');
        });
      });
      
      // Checkbox toggle (for custom styling)
      const checkboxLabels = document.querySelectorAll('.checkbox-label');
      checkboxLabels.forEach(label => {
        label.addEventListener('click', function() {
          const icon = this.querySelector('.material-icons');
          if (icon.textContent === 'check_box_outline_blank') {
            icon.textContent = 'check_box';
            icon.style.color = 'var(--primary)';
          } else if (icon.textContent === 'check_box') {
            icon.textContent = 'check_box_outline_blank';
            icon.style.color = 'var(--gray-400)';
          } else if (icon.textContent === 'radio_button_unchecked') {
            icon.textContent = 'radio_button_checked';
            icon.style.color = 'var(--primary)';
          } else if (icon.textContent === 'radio_button_checked') {
            icon.textContent = 'radio_button_unchecked';
            icon.style.color = 'var(--gray-400)';
          }
        });
      });
    });
  </script>
</body>
</html>